{"version":3,"sources":["../src/kalvidres_mod_form.js"],"names":["SELECTORS","OPEN_VIDEO_PICKER","ENTRY_ID","VIDEO_TITLE","ENTRY_THUMBNAIL","SELECTED_ENTRY_HEADER","init","contextid","entryid","entryname","entrythumbnail","ModalFactory","create","type","ModalVideoPicker","getType","modal","selectedEntryId","selectedEntryName","selectedEntryThumbnail","registerEventListeners","Notification","exception","on","show","ModalVideoPickerEvents","entrySelected","entry","val","entryId","attr","entryThumbnail","entryName","selectedEntryText","text"],"mappings":"qTAAA,OAEA,OAIA,OACA,OACA,O,qXAEMA,CAAAA,CAAS,CAAG,CACdC,iBAAiB,CAAE,eADL,CAEdC,QAAQ,CAAE,WAFI,CAGdC,WAAW,CAAE,cAHC,CAIdC,eAAe,CAAE,kBAJH,CAKdC,qBAAqB,CAAE,yCALT,C,CAQLC,CAAI,4CAAG,WAAOC,CAAP,CAAkBC,CAAlB,CAA2BC,CAA3B,CAAsCC,CAAtC,iHAEQC,WAAaC,MAAb,CAAoB,CAACC,IAAI,CAAEC,UAAiBC,OAAjB,EAAP,CAApB,CAFR,QAENC,CAFM,QAGZA,CAAK,CAACT,SAAN,CAAkBA,CAAlB,CACAS,CAAK,CAACC,eAAN,CAAwBT,CAAxB,CACAQ,CAAK,CAACE,iBAAN,CAA0BT,CAA1B,CACAO,CAAK,CAACG,sBAAN,CAA+BT,CAA/B,CACAU,CAAsB,CAACJ,CAAD,CAAtB,CAPY,qDASZK,UAAaC,SAAb,OATY,uDAAH,uD,UAajB,GAAMF,CAAAA,CAAsB,CAAG,SAACJ,CAAD,CAAW,CAEtC,cAAEhB,CAAS,CAACC,iBAAZ,EAA+BsB,EAA/B,CAAkC,OAAlC,CAA2C,UAAM,CAC7CP,CAAK,CAACQ,IAAN,EACH,CAFD,EAIA,gBAAUC,UAAuBC,aAAjC,4CAAgD,WAAOC,CAAP,yFAC5C,cAAE3B,CAAS,CAACE,QAAZ,EAAsB0B,GAAtB,CAA0BD,CAAK,CAACE,OAAhC,EACA,cAAE7B,CAAS,CAACI,eAAZ,EAA6B0B,IAA7B,CAAkC,KAAlC,CAAyCH,CAAK,CAACI,cAA/C,EACA,cAAE/B,CAAS,CAACG,WAAZ,EAAyByB,GAAzB,CAA6BD,CAAK,CAACK,SAAnC,EAH4C,eAIZ,iBAAU,gBAAV,CAA4B,eAA5B,CAA6CL,CAAK,CAACK,SAAnD,CAJY,QAItCC,CAJsC,QAK5C,cAAEjC,CAAS,CAACK,qBAAZ,EAAmC6B,IAAnC,CAAwCD,CAAxC,EAL4C,wCAAhD,wDAQH,C","sourcesContent":["import $ from 'jquery';\n\nimport Notification from 'core/notification';\nimport {subscribe} from 'core/pubsub';\nimport {get_string as getString} from 'core/str';\n\nimport ModalFactory from 'core/modal_factory';\nimport ModalVideoPicker from 'local_kaltura/modal_video_picker';\nimport ModalVideoPickerEvents from 'local_kaltura/modal_video_picker_events';\n\nconst SELECTORS = {\n    OPEN_VIDEO_PICKER: '#id_add_media',\n    ENTRY_ID: '#entry_id',\n    VIDEO_TITLE: '#video_title',\n    ENTRY_THUMBNAIL: '#media_thumbnail',\n    SELECTED_ENTRY_HEADER: '[data-region=\"selected-entry-header\"]'\n};\n\nexport const init = async (contextid, entryid, entryname, entrythumbnail) => {\n    try {\n        const modal = await ModalFactory.create({type: ModalVideoPicker.getType()});\n        modal.contextid = contextid;\n        modal.selectedEntryId = entryid;\n        modal.selectedEntryName = entryname;\n        modal.selectedEntryThumbnail = entrythumbnail;\n        registerEventListeners(modal);\n    } catch(error) {\n        Notification.exception(error);\n    }\n};\n\nconst registerEventListeners = (modal) => {\n\n    $(SELECTORS.OPEN_VIDEO_PICKER).on('click', () => {\n        modal.show();\n    });\n\n    subscribe(ModalVideoPickerEvents.entrySelected, async (entry) => {\n        $(SELECTORS.ENTRY_ID).val(entry.entryId);\n        $(SELECTORS.ENTRY_THUMBNAIL).attr('src', entry.entryThumbnail);\n        $(SELECTORS.VIDEO_TITLE).val(entry.entryName);\n        const selectedEntryText = await getString('selected_entry', 'local_kaltura', entry.entryName);\n        $(SELECTORS.SELECTED_ENTRY_HEADER).text(selectedEntryText);\n    });\n\n};"],"file":"kalvidres_mod_form.min.js"}